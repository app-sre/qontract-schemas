---
"$schema": /metaschema-1.json
version: "1.0"
type: object

additionalProperties: false
properties:
  "$schema":
    type: string
    enum:
    - /access/oidc-permission-1.yml
  labels:
    "$ref": "/common-1.json#/definitions/labels"
  name:
    type: string
  service:
    type: string
  description:
    type: string
  vault_policies:
    type: array
    items:
      "$ref": "/common-1.json#/definitions/crossref"
      "$schemaRef":
        type: object
        properties:
          '$schema':
            type: string
            enum:
            - /vault-config/policy-1.yml
  instance:
    "$ref": "/common-1.json#/definitions/crossref"
    "$schemaRef": "/vault-config/instance-1.yml"
  access_scopes:
    type: array
    items:
      type: object
      properties:
        cluster:
          "$ref": "/common-1.json#/definitions/crossref"
          "$schemaRef": "/openshift/cluster-1.yml"
        namespaces:
          type: array
          items:
            "$ref": "/common-1.json#/definitions/crossref"
            "$schemaRef": "/openshift/namespace-1.yml"
      required:
      - cluster
  permission_set:
    enum:
    - admin
    - analyst
    - vuln-admin
oneOf:
- properties:
    service:
      enum:
      - vault
    vault_policies:
      type: array
      items:
        "$ref": "/common-1.json#/definitions/crossref"
        "$schemaRef":
          type: object
          properties:
            '$schema':
              type: string
              enum:
              - /vault-config/policy-1.yml
    instance:
      "$ref": "/common-1.json#/definitions/crossref"
      "$schemaRef": "/vault-config/instance-1.yml"
  required:
  - vault_policies
  - instance
- properties:
    service:
      enum:
      - acs
    access_scopes:
      type: array
      items:
        type: object
        properties:
          cluster:
            "$ref": "/common-1.json#/definitions/crossref"
            "$schemaRef": "/openshift/cluster-1.yml"
          namespaces:
            type: array
            items:
              "$ref": "/common-1.json#/definitions/crossref"
              "$schemaRef": "/openshift/namespace-1.yml"
        required:
        - cluster
    permission_set:
      enum:
      - admin
      - analyst
      - vuln-admin
  required:
  - permission_set
required:
- $schema
- name
- description
- service
