---
"$schema": /metaschema-1.json
version: "1.0"
type: object

additionalProperties: false
properties:
  "$schema":
    type: string
    enum:
    - /app-sre/automated-action-argument-1.yml
  labels:
    "$ref": "/common-1.json#/definitions/labels"
  type:
    type: string

  # type=openshift related properties
  namespace:
    "$ref": "/common-1.json#/definitions/crossref"
    "$schemaRef": "/openshift/namespace-1.yml"
  kind_pattern:
    type: string
    description: "The kind pattern to match."
  name_pattern:
    type: string
    description: "The name pattern to match."

  # type=action-list related properties
  action_user:
    type: string
    description: "The user filter for the action list."
  max_age_minutes:
    type: integer
    description: "The maximum age filter"

oneOf:
- properties:
    type:
      enum:
      - openshift
    namespace:
      "$ref": "/common-1.json#/definitions/crossref"
      "$schemaRef": "/openshift/namespace-1.yml"
    kind_pattern:
      type: string
    name_pattern:
      type: string
  required:
  - namespace
  - name_pattern
  - kind_pattern

- properties:
    type:
      enum:
      - action-list
    action_user:
      type: string
    max_age_minutes:
      type: integer

required:
- type
