---
"$schema": /metaschema-1.json
version: '1.0'
type: object

additionalProperties: false
properties:
  "$schema":
    type: string
    enum:
    - /cloudflare/terraform-resource-1.yml
  provider:
    type: string
  zone:
    type: string
  plan:
    enum:
    - enterprise
    - free
  type:
    enum:
    - full
    - partial
  settings:
    type: object
  records:
    type: array
    items:
      type: object
      additionalProperties: false
      properties:
        name:
          type: string
        type:
          type: string
        ttl:
          type: integer
        value:
          type: string
        proxied:
          type: boolean
  workers:
    type: array
    items:
      type: object
      additionalProperties: false
      properties:
        identifier:
          type: string
        pattern:
          type: string
        script:
          type: object
          additionalProperties: false
          properties:
            name:
              type: string
            content_from_github:
              type: object
              additionalProperties: false
              properties:
                repo:
                  type: string
                path:
                  type: string
                ref:
                  type: string
                  pattern: '^([0-9a-f]{40}|master|main|internal|quayio)$'
              required:
              - repo
              - path
              - ref
          required:
          - name
          - content_from_github
      required:
      - identifier
      - pattern
      - script
oneOf:
- additionalProperties: false
  properties:
    provider:
      type: string
      enum:
      - zone
    zone:
      type: string
    plan:
      enum:
      - enterprise
      - free
    type:
      enum:
      - full
      - partial
    settings:
      type: object
    records:
      type: array
      items:
        type: object
        additionalProperties: false
        properties:
          name:
            type: string
          type:
            type: string
          ttl:
            type: integer
          value:
            type: string
          proxied:
            type: boolean
        required:
        - name
        - type
        - ttl
        - value
    workers:
      type: array
      items:
        type: object
        additionalProperties: false
        properties:
          identifier:
            type: string
          pattern:
            type: string
          script:
            type: object
            additionalProperties: false
            properties:
              name:
                type: string
              content_from_github:
                type: object
                additionalProperties: false
                properties:
                  repo:
                    type: string
                  path:
                    type: string
                  ref:
                    type: string
                    pattern: '^([0-9a-f]{40}|master|main|internal|quayio)$'
                required:
                - repo
                - path
                - ref
            required:
            - name
            - content_from_github
        required:
        - identifier
        - pattern
        - script
  required:
  - zone
required:
- provider
