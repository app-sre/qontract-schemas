---
"$schema": /metaschema-1.json
version: '1.0'
type: object
additionalProperties: false
properties:
  "$schema":
    type: string
    enum:
    - /cna/aws-rds-config-1.yml
  vpc:
    "$ref": "/common-1.json#/definitions/crossref"
    "$schemaRef": "/aws/vpc-1.yml"
    description: The VPC the RDS instance is created in.
  db_subnet_group_name:
    type: string
    description: |
      Name of DB subnet group. DB instance will be created in the VPC
      associated with the DB subnet group.
      Must exist in the referenced VPC.
      Mandatory: must be set here or provided via a default.
  instance_class:
    "$ref": "/common-1.json#/definitions/rdsDbInstanceClass"
  allocated_storage:
    type: integer
    description: allocated storage in Gi
  max_allocated_storage:
    type: integer
    description: max allocated storage in Gi
  engine:
    type: string
    enum:
    - postgres
  engine_version:
    type: string
    description: The engine version to use
  username:
    type: string
  maintenance_window:
    type: string
    description: |
      The window to perform maintenance in.
      Syntax: 'ddd:hh24:mi-ddd:hh24:mi'. Eg: 'Mon:00:00-Mon:03:00'
  backup_retention_period:
    type: integer
    description: The days to retain backups for
  backup_window:
    type: string
    description: |
      The daily time range (in UTC) during which automated backups are created if they are enabled.
      Example: '09:46-10:16'
      Must not overlap with maintenance_window
  multi_az:
    type: boolean
    description: |
      Whether to use a multi-az configuration that includes a standby instance to improve
      availability when a failover is required (certain upgrades, instance hardware issues, etc.)
  deletion_protection:
    type: boolean
    description:
      Protect against deletion. Defaults to true.
  apply_immediately:
    type: boolean
    description: |
      Indicates whether to apply changes immediately, or wait until the next maintenance window
  is_production:
    type: boolean
    description: |
      Set production defaults on optional values if true.
required:
- "$schema"
- vpc
- db_subnet_group_name
- instance_class
- allocated_storage
- max_allocated_storage
- engine
- engine_version
- is_production
